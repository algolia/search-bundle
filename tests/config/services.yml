services:
    search.search_indexer_listener:
        class: Algolia\SearchBundle\EventListener\SearchIndexerListener
        public: true
        arguments:
            - '@search.service'
            # For some reason this parameter is not passed in the
            # test environment (look at AlgoliaSearchExtension.php)
            # So the service is redefined here
            - ['postPersist', 'postUpdate', 'preRemove']

    serializer.commentnormalizer:
        class: Algolia\SearchBundle\Normalizer\CommentNormalizer
        tags: [serializer.normalizer]
#        priority: -88

    serializer:
        public: true